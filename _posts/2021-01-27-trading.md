---
layout: post
title: "A Trading Strategy"
---

$$
\newcommand{\bm}[1]{\boldsymbol{#1}}
$$

There are times in the financial market when a certain asset is traded at a low price but it has huge potential for speculation. Back in 2013 you could buy bitcoins at \$13.50, and by the end of 2017 they were traded at nearly \$20k. When Tesla (TSLA) and Nio (NIO) took off in 2020, their stock prices rallied by 9x and 25x, respectively. In the recent WallStreetBets war with shorting institutions, Gamestop (GME) has had its price skyrocketed because of a short squeeze. The questions is, how can we seize these opportunities and make some profit? 

The first trick is to capture the signal and get into the game early, when buying costs are still low. The next problem is when to sell them. No one knows what the peak will be. And to make things worse, when the bubble explodes, the price can drop even faster than it raise, and the asset may become near worthless. Another reason you might want to cash out prematurely is that you want to realize some profit, so that you can maximize expected utility or have something to brag about. A natural way to achieve this is to sell with a designed cadence: when the price rises to this number, sell this amount; when the price rises to that number, sell that amount; and so on. 

Now, I will introduce an important pattern of thinking: exponential thinking. It may be tempting to set selling limits with a uniform interval: \$10, \$20, \$30, \$40, ... But notice: it is easier to gain \$10 for a \$20 stock than for a \$10 stock; the first one needs only go up by 50%, whereas the latter needs 100%. If you set price limits as an arithmetic sequence like the aforementioned one, you may need to trade more and more frequently, and end up selling more at lower prices. The potential gain is proportional to the current value of the stock, and therefore, by basic calculus, we should think of prices against an exponential curve. That's why we should set the price limits as a geometric sequence: e.g. \$10, \$20, \$40, \$80, ... (More on exponential thinking: [Benford's Law](https://en.wikipedia.org/wiki/Benford's_law))

Like physicists, we setup the problem as an ideal model. For simplicity, assume that we bought 1 share of stock at price \$1. Trading fractional shares is allowed. The stock will keep rising until it hits \$$M$ per share ($M$ is unknown to us), after which it will become worthless. Our goal is to maximize the revenue. 

Here's our strategy, in formal language. We choose parameters $p > 1, 0 < s < 1$. Whenever the price multiplies by $p$, we sell some shares. The number of shares sold each time is $s$ times the number sold in the previous time. 

| When the price rises to ... | Sell ... shares |
| --- | --- |
| $p$ | $a_0 s$ |
| $p^2$ | $a_0 s^2$ |
| $p^3$ | $a_0 s^3$ |
| ... | ... |
| $p^k$ | $a_0 s^k$ |
| ... | ... |

Apparently we need to make the total number of shares sold add up to 1, which yields $a_0 = \frac{1 - s}{s}$. If the price peaks at $M \in [p^k, p^{k+1})$, our revenue will be $$R = p (1-s) \frac{(p s)^n - 1}{p s - 1}$$

Let's look at some examples. Let $p = 2$ and $s = 1/2$. At price \$2 we sell 1/2 shares and earn \$1. There we will break even. Then at price \$4 we sell 1/4 shares and earn another \$1. At price \$8 we sell 1/8 shares and earn another \$1. Note that our total revenue is unbounded, but only grows linearly as price rises exponentially. 

This time we keep $p = 2$ and let $s = 1/3$. At price \$2 we sell 2/3 shares and earn \$4/3. At price \$4 we sell 2/9 shares and earn \$8/9. Note that we earned less in the second round. Then at price \$8 we sell 2/27 shares and earn \$16/27, which is even less. Our earnings per round is a decreasing geometric sequence, and our total revenue is capped at \$4. This is bad -- we capped our gain at 4x, while the stock might rocket to 1000x! 

Let's still keep $p = 2$ and let $s = 2/3$. Things are totally different this time. At price \$2 we sell 1/3 shares and earn \$2/3. At price \$4 we sell 2/9 shares and earn \$8/9. Note that we earned more in the second round! Then at price \$8 we sell 4/27 shares and earn \$32/37, which is even more. Our earnings per round becomes an increasing geometric sequence, and our total revenue is unlimited! Yet the story does not end here -- as price rises exponentially, our total revenue also grows exponentially (although still slower than price). Although we started out earning slower (in the first rounds), we unlocked unlimited potential! 

To study the root cause of this behavior we go back to the revenue formula. It converges when $p s < 1$, and diverges when $p s > 1$. Our two last examples confirm this. So to make unbounded revenue, you just need to set $p s > 1$, have faith, and have a little bit of patience. 

To further analyze the impact of selection of $p$ and $s$, let's look at the revenues in the following scenarios: $(p = 2, s = 2/3)$, $(p = 4, s = 2/3)$, $(p = 4, s = 1/3)$

| $M$ | $R(p = 2, s = 2/3)$ | $R(p = 4, s = 2/3)$ | $R(p = 4, s = 1/3)$ |
| --- | --- | --- | --- |
| [2, 4) | 0.6667 |
| [4, 8) | 1.556 | 1.333 | 2.667 |
| [8, 16) | 2.741 |
| [16, 32) | 4.321 | 4.889 | 6.222 |
| [32, 64) | 6.428 |
| [64, 128) | 9.237 | 14.37 | 10.96 |
| [128, 256) | 12.98 |
| [256, 512) | 17.98 | 39.65 | 17.28 |
| [512, 1024) | 24.64 |

Comparing the first two columns tells us what happens when we vary $p$. A lower $p$ yields better revenue at the low multiplier range, while a higher $p$ yields better revenue at the high multiplier range. So if we predict a high $M$, we should use larger $p$. Comparing the last two columns tells us what happens when we vary $s$. A lower $s$ means we sell more aggresively at the beginning, and yields better revenue at the low multiplier range. In contrast, a higher $s$ saves more shares to the long run, and yields better revenue at the high multipler range. So if we predict a high $M$, we should use larger $s$. 

If you are looking for a good parameter setting that gives you at least $\sqrt{M}$ revenue, use the golden ratio! Set $p = \phi = 1.618, s = \bar{\phi} = 0.618$. The action table is

| When the price rises to ... | Sell ... shares | Earn ... | Revenue |
| --- | --- | --- | --- |
| $\phi^2 = 2.618$ | $\bar{\phi}^2 = 0.3820$ | $\phi^0 = 1.0$ | $\phi^2 - \phi = 1.0$ |
| $\phi^4 = 6.854$ | $\bar{\phi}^3 = 0.2361$ | $\phi^1 = 1.618$ | $\phi^3 - \phi = 2.618$ |
| $\phi^6 = 17.94$ | $\bar{\phi}^4 = 0.1459$ | $\phi^2 = 2.618$ | $\phi^4 - \phi = 5.236$ |
| $\phi^8 = 46.98$ | $\bar{\phi}^5 = 0.09017$ | $\phi^3 = 4.236$ | $\phi^5 - \phi = 9.472$ |
| $\phi^{10} = 123.0$ | $\bar{\phi}^6 = 0.05573$ | $\phi^4 = 6.854$ | $\phi^6 - \phi = 16.33$ |
| ... | ... |
| $\phi^{2k}$ | $\bar{\phi}^{k+1}$ | $\phi^k$ | $\phi^{k+2} - \phi$ |
| ... | ... |